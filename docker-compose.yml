version: '3.7'
services:
  vuepress:
    image: node:alpine
    volumes:
      - .:/opt/app
    working_dir: /opt/app
    ports:
      - "8080:8080"
    command: ./scripts/dev.sh

  netlify:
    image: flemay/netlify
    volumes:
      - ./netlify.toml:/opt/app/netlify.toml:ro
      - ./docs/.vuepress/dist:/opt/app/docs/.vuepress/dist:ro
    working_dir: /opt/app
    env_file: .env